inc_id: INC013
server_id: SRV008
region: Europe West
date: 2025-03-04T11:33:19Z

# What happened?
Reporting service staging returned stale data for newly ingested records for ~31 minutes.

# What went wrong and why?
The staging environment’s read replicas lagged behind primary due to a long-running analytical query without statement_timeout. The app’s read preference forced queries to replicas only.

# How did we respond?
* 11:36 UTC – QA raised mismatch issue; staging on-call engaged.
* 11:41 UTC – Terminated offending query; reduced max execution time in DB.
* 12:04 UTC – Replica caught up; switched read preference to primary until healthy.

# How are we making incidents like this less likely or less impactful?
* Add circuit breaker to failover to primary when replica lag > 30s (In progress)
* Enforce statement_timeout in staging (Completed)
* Separate OLTP and OLAP workloads (Planned)

# How can customers make incidents like this less impactful?
* For validation, wait for data freshness indicator before verifying reports.
* Avoid long cross-join queries in staging against shared replicas.
